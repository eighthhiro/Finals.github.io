<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sova's Archery Challenge</title>
    <link rel="icon" href="./assets/val.png" type="image/x-icon">
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="loading">
        <div id="loadingContent">
            <div class="headphones-notice">
              <div class="headphones-icon">ðŸŽ§</div>
              <p>Use headphones for better experience</p>
              <button id="confirmSound">Roger!</button>
            </div>
          </div>        
        <audio id="loadingSound" src="./audio/sfx/loading-screen-sound.mp3" preload="auto"></audio>
    </div>
    
    <div id="lobby">
        <!-- Video Background Placeholder -->
        <video id="video-background" autoplay muted loop>
            <source src="./assets/Home.mp4" type="video/mp4">
            <!-- Fallback image if video doesn't load -->
            <img src="./assets/Lobby.png" alt="Lobby Background">
        </video>

        <!-- Navbar -->
        <div class="navbar">
            <img src="./assets/val.png" alt="Sova's Archery" class="navbar-logo">
            <div class="navbar-links">
                <div id="homeLink" class="navbar-link active">HOME</div>
                <div id="statsButton" class="navbar-link">STATS</div>
                <div id="helpButton" class="navbar-link">HELP</div>
                <div id="settingsLink" class="navbar-link">SETTINGS</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="play-button-container">
            <button id="playButton" class="valorant-play-button">PLAY</button>
        </div>

        <!-- Ranks System (Initially Hidden) -->
        <div id="rankSystem" class="hidden">
            <!-- Added video container for rank selection -->
            <div class="rank-video-container">
                <video id="rank-video-background" autoplay muted loop>
                    <source src="./assets/Play-Lobby.mp4" type="video/mp4">
                    <img src="./assets/Rank-Selection.png" alt="Rank Selection Background">
                </video>
            </div>
            
            <div class="rank-list">
                <!-- Iron Group Header -->
                <div class="rank-group-header">
                    <div class="rank-group-icon" style="background-image: url('./assets/ranks/iron.png');"></div>
                    <div class="rank-group-name">IRON</div>
                </div>
                
                <!-- Iron Levels -->
                <div class="rank-item active" data-level="1" data-points="20" data-unlocked="true" data-image="iron1">
                    <div class="rank-icon" style="background-image: url('./assets/ranks/iron1.png');"></div>
                    <div class="rank-details">
                        <div class="rank-name">Level 1</div>
                        <div class="rank-points">0/20 PTS</div>
                    </div>
                </div>
                <div class="rank-item" data-level="2" data-points="20" data-unlocked="false" data-image="iron1">
                    <div class="rank-icon" style="background-image: url('./assets/ranks/iron1.png');"></div>
                    <div class="rank-details">
                        <div class="rank-name">Level 2</div>
                        <div class="rank-points">0/20 PTS</div>
                    </div>
                </div>
                <div class="rank-item locked" data-level="3" data-points="20" data-unlocked="false" data-image="iron2">
                    <div class="rank-icon" style="background-image: url('./assets/ranks/iron2.png');"></div>
                    <div class="rank-details">
                        <div class="rank-name">Level 3</div>
                        <div class="rank-points">0/20 PTS</div>
                    </div>
                </div>
                <div class="rank-item locked" data-level="4" data-points="20" data-unlocked="false" data-image="iron2">
                    <div class="rank-icon" style="background-image: url('./assets/ranks/iron2.png');"></div>
                    <div class="rank-details">
                        <div class="rank-name">Level 4</div>
                        <div class="rank-points">0/20 PTS</div>
                    </div>
                </div>
                <div class="rank-item locked" data-level="5" data-points="10" data-unlocked="false" data-image="iron3">
                    <div class="rank-icon" style="background-image: url('./assets/ranks/iron3.png');"></div>
                    <div class="rank-details">
                        <div class="rank-name">Level 5</div>
                        <div class="rank-points">0/10 PTS</div>
                    </div>
                </div>
                <div class="rank-item locked" data-level="6" data-points="10" data-unlocked="false" data-image="iron3">
                    <div class="rank-icon" style="background-image: url('./assets/ranks/iron3.png');"></div>
                    <div class="rank-details">
                        <div class="rank-name">Level 6</div>
                        <div class="rank-points">0/10 PTS</div>
                    </div>
                </div>
                
                <!-- Bronze Group Header for future expansion -->
                <div class="rank-group-header">
                    <div class="rank-group-icon" style="background-image: url('./assets/ranks/bronze.png');"></div>
                    <div class="rank-group-name">BRONZE</div>
                </div>
                
                <!-- Placeholder for future Bronze levels -->
                <div class="rank-item locked" data-level="6" data-points="20" data-unlocked="false">
                    <div class="rank-icon" style="background-image: url('./assets/ranks/bronze.png');"></div>
                    <div class="rank-details">
                        <div class="rank-name">Level 1</div>
                        <div class="rank-points">0/20 PTS</div>
                    </div>
                </div>
            </div>
            
            <div class="rank-display">
                <div class="rank-preview" style="background-image: url('./assets/ranks/iron.png');"></div>
                <h2 class="rank-title">IRON - LEVEL 1</h2>
                <p class="rank-description">The first step in Sova's Archery Challenge. Master the basics of bow control to progress to more challenging levels. Every shot counts.</p>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>
                    <div class="progress-text">
                        <span>0 PTS</span>
                        <span>20 PTS NEEDED</span>
                    </div>
                </div>
                <button class="play-level-btn" data-level="1">START CHALLENGE</button>
            </div>
        </div>

        <!-- Stats Panel -->
        <div id="statsPanel" class="panel hidden">
            <h2>PLAYER STATS</h2>
            <div class="stats-content">
                <p>Arrows Fired: <span id="arrowsFired">0</span></p>
                <p>Enemies Defeated: <span id="enemiesDefeated">0</span></p>
                <p>Accuracy: <span id="accuracy">0%</span></p>
                <p>Highest Rank: <span id="highestRank">IRON I</span></p>
                <p>Total Points: <span id="totalPoints">0</span>/100</p>
            </div>
            <button class="close-panel valorant-button">CLOSE</button>
        </div>

        <!-- Help Panel -->
        <div id="helpPanel" class="panel hidden">
            <h2>HOW TO PLAY</h2>
            <div class="help-content">
                <p>â€¢ Click and drag from Sova to aim and release to shoot arrows</p>
                <p>â€¢ Defeat all defenders before they defuse the spike</p>
                <p>â€¢ Headshots deal more damage</p>
                <p>â€¢ Earn points based on accuracy and speed</p>
                <p>â€¢ Collect 100 points to rank up to the next level</p>
            </div>
            <button class="close-panel valorant-button">CLOSE</button>
        </div>
    </div>

    <!-- Game Container -->
    <div id="gameContainer" class="hidden">
        <canvas id="gameCanvas"></canvas>
        <div id="hud">
            <div id="levelInfo">RANK: <span id="currentLevel">IRON I</span></div>
            <div id="enemiesLeft">ENEMIES: <span id="enemyCount">1</span></div>
            <button id="returnToLobby" class="valorant-button">MENU</button>
        </div>
    </div>

    <script>
        // Handle loading screen
        document.addEventListener('DOMContentLoaded', function() {
            const loadingElement = document.getElementById('loading');
            const confirmButton = document.getElementById('confirmSound');
            const loadingSound = document.getElementById('loadingSound');
            
            // Show loading screen immediately
            loadingElement.style.display = 'flex';
            
            confirmButton.addEventListener('click', function() {
            // Play sound when user clicks OK
            loadingSound.play().then(() => {
                console.log("Audio playback started");
            }).catch(e => {
                console.error("Audio playback failed:", e);
            });
            
            // Remove the headphones notice
            document.querySelector('.headphones-notice').style.display = 'none';
            
            // Hide loading screen after delay
            setTimeout(function() {
                loadingElement.style.display = 'none';
            }, 8000);
            });
        });
    </script>
    <script src="./lobby.js"></script>
    <script type="module" src="./game.js"></script>
</body>
</html>